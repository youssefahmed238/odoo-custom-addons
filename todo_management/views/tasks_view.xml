<odoo>
    <record id = 'tasks_view_tree' model = 'ir.ui.view'>
        <field name = 'name'>todo tasks tree</field>
        <field name = 'model'>todo.tasks</field>
        <field name = 'arch' type = 'xml'>
            <tree decoration-danger = "(is_late)">
                <field name = 'name'/>
                <field name = 'description'/>
                <field name = 'assign_to'/>
                <field name = 'due_date'/>
                <field name = 'estimated_time'/>
                <field name = 'state'/>
                <field name = 'active' invisible = '1' optional = '1'/>
                <field name = 'is_late' invisible = '1' optional = '1'/>
            </tree>
        </field>
    </record>

    <record id = 'tasks_view_form' model = 'ir.ui.view'>
        <field name = 'name'>todo tasks form</field>
        <field name = 'model'>todo.tasks</field>
        <field name = 'arch' type = 'xml'>
            <form>
                <sheet>
                    <header>
                        <field name = 'state' widget = 'statusbar' options = "{'clickable': 1}"/>
                    </header>
                    <div class = 'oe_title'>
                        <h1>
                            <field name = 'ref'/>
                        </h1>
                        <label for = 'name' class = 'oe_edit_only'/>
                        <h3>
                            <field name = 'name' placeholder = 'Task Name' readonly="state in ('completed', 'closed')"/>
                        </h3>
                    </div>
                    <group string = 'Task Details'>
                        <label for = 'description' class = 'oe_edit_only'/>
                        <h3>
                            <field name = 'description' readonly="state in ('completed', 'closed')"/>
                        </h3>
                    </group>
                    <group string = "Task Information">
                        <field name = 'assign_to' readonly="state in ('completed', 'closed')"/>
                        <field name = 'due_date' readonly="state in ('completed', 'closed')"/>
                        <field name = 'estimated_time' readonly="state in ('completed', 'closed')"/>
                        <field name = 'active' invisible = '1'/>
                    </group>
                    <notebook>
                        <page string = 'Time Sheet'>
                            <field name = 'task_line_ids' readonly="state in ('completed', 'closed')">
                                <tree editable = 'bottom'>
                                    <field name = 'date'/>
                                    <field name = 'description'/>
                                    <field name = 'duration'/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id = 'tasks_view_search' model = 'ir.ui.view'>
        <field name = 'name'>todo tasks search</field>
        <field name = 'model'>todo.tasks</field>
        <field name = 'arch' type = 'xml'>
            <search>
                <field name = 'name'/>
                <field name = 'assign_to'/>

                <filter name = 'new_tasks' string = 'New Tasks' domain = "[('state', '=', 'new')]"/>
                <filter name = 'in_progress_tasks' string = 'In Progress Tasks' domain = "[('state', '=', 'in_progress')]"/>
                <filter name = 'completed_tasks' string = 'Completed Tasks' domain = "[('state', '=', 'completed')]"/>

                <filter name = 'group_assign_to' string="Assign to" context = "{'group_by': 'assign_to'}"/>
                <filter name = 'group_state' string="Statue" context = "{'group_by': 'state'}"/>
                <filter name = 'group_due_date' string="Due Date" context = "{'group_by': 'due_date'}"/>
            </search>
        </field>
    </record>

    <record id = 'tasks_close_server_action' model = 'ir.actions.server'>
        <field name = 'name'>Close</field>
        <field name = 'model_id' ref = 'todo_management.model_todo_tasks'/>
        <field name = 'binding_model_id' ref = 'todo_management.model_todo_tasks'/>
        <field name = 'state'>code</field>
        <field name = 'code'>
            action = records.set_state_closed()
        </field>
    </record>

    <record id = 'multi_assign_tasks_server_action' model = 'ir.actions.server'>
        <field name = 'name'>Multi Assign</field>
        <field name = 'model_id' ref = 'todo_management.model_todo_tasks'/>
        <field name = 'binding_model_id' ref = 'todo_management.model_todo_tasks'/>
        <field name="binding_view_types">list</field>
        <field name = 'state'>code</field>
        <field name = 'code'>
            action = records.multi_assign_tasks()
        </field>
    </record>

    <record id = 'tasks_is_late_auto_action' model = 'ir.cron'>
        <field name = 'name'>Tasks: Check Late Tasks</field>
        <field name = 'model_id' ref = 'model_todo_tasks'/>
        <field name = 'state'>code</field>
        <field name = 'code'>model.check_is_late_tasks()</field>
        <field name = 'interval_number'>1</field>
        <field name = 'interval_type'>days</field>
        <field name = 'numbercall'>-1</field>
    </record>

    <record id = 'tasks_action' model = 'ir.actions.act_window'>
        <field name = 'name'>Tasks</field>
        <field name = 'res_model'>todo.tasks</field>
    </record>
</odoo>